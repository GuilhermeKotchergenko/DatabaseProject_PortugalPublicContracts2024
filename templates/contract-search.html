{% extends "base.html" %}

{% block title %}Pesquisar Contratos{% endblock %}

{% block content %}
<h2>Pesquisar Contratos</h2>

<div class="search-form">
    <form method="GET" action="{{ url_for('contract_search') }}">
        <input type="text" name="q" placeholder="Pesquisar por objeto ou entidade..." value="{{ query if query else '' }}">
        <button type="submit">Pesquisar</button>
    </form>
</div>

{% if contracts %}
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Objetivo</th>
            <th>Tipo de Procedimento</th>
            <th>Preço</th>
        </tr>
    </thead>
    <tbody>
        {% for contract in contracts %}
        <tr>
            <td><a href="{{ url_for('contract', id=contract['IdContrato']) }}">{{ contract['IdContrato'] }}</a></td>
            <td>{{ contract['ObjetivoContrato'] }}</td>
            <td>{{ contract['TipoProcedimento'] }}</td>
            <td>{{ contract['preco'] }} €</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% elif query %}
<p>Nenhum resultado encontrado para "{{ query }}".</p>
{% endif %}
{% endblock %}
